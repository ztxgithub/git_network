# 网络编程注意事项

```shell
    1.server 异常退出后(或则配置文件修改了需要马上重启)，端口没有被系统马上释放，
      如何才能立即使用端口呢
      
      on = 1;
      ret = setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on))
      
    2. 发送数据包大小问题：如果 write(/send、sendto)的 缓存过大，协议层就会拆包发送，如果存在丢包现象（TCP 应答机制会重发
       保证小包发送出去），实时大数据发送的时候，系统性能就会降低。
       
       解决方案: 参考内核拆包的最大容量设置及网络吞吐能力，如果应用层数据过大，就需要应用层拆包发送，
               保证协议层不用拆包
```